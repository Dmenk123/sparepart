var save_method,table;function add_menu(){reset_modal_form(),save_method="add",$("#modal_talent_form").modal("show"),$("#modal_title").text("Tambah talent Baru")}function edit_talent(a){reset_modal_form(),save_method="update",$.ajax({url:base_url+"master_talent/edit_talent",type:"POST",dataType:"JSON",data:{id:a},success:function(a){$("#div_preview_foto").css("display","block"),$('[name="id_talent"]').val(a.old_data.id),$('[name="nama"]').val(a.old_data.nama),$("[name='deskripsi']").val(a.old_data.deskripsi),$('[name="akun_fb"]').val(a.old_data.akun_fb),$('[name="akun_ig"]').val(a.old_data.akun_ig),$('[name="akun_tw"]').val(a.old_data.akun_tw),$("#preview_img").attr("src","data:image/jpeg;base64,"+a.foto_encoded),$("#modal_talent_form").modal("show"),$("#modal_title").text("Edit Talent")},error:function(a,e,t){alert("Error get data from ajax")}})}function reload_table(){table.ajax.reload(null,!1)}function save(){var a,t="add"==save_method?(a=base_url+"master_talent/add_data_talent","Tambah Talent"):(a=base_url+"master_talent/update_data_talent","Edit Talent"),e=$("#form-talent")[0],n=new FormData(e),e=CKEDITOR.instances.deskripsi.getData();n.append("txt_deskripsi",e),$("#btnSave").prop("disabled",!0),$("#btnSave").text("Menyimpan Data"),$.ajax({type:"POST",enctype:"multipart/form-data",url:a,data:n,dataType:"JSON",processData:!1,contentType:!1,cache:!1,timeout:6e5,success:function(a){if(a.status)swal.fire("Sukses!!","Aksi "+t+" Berhasil","success"),$("#btnSave").prop("disabled",!1),$("#btnSave").text("Simpan"),reset_modal_form(),$(".modal").modal("hide"),reload_table();else{for(var e=0;e<a.inputerror.length;e++)"pegawai"!=a.inputerror[e]?($('[name="'+a.inputerror[e]+'"]').addClass("is-invalid"),$('[name="'+a.inputerror[e]+'"]').next().text(a.error_string[e]).addClass("invalid-feedback")):$('[name="'+a.inputerror[e]+'"]').next().next().text(a.error_string[e]).addClass("invalid-feedback-select");$("#btnSave").prop("disabled",!1),$("#btnSave").text("Simpan")}},error:function(a){console.log("ERROR : ",a),$("#btnSave").prop("disabled",!1),$("#btnSave").text("Simpan"),reset_modal_form(),$(".modal").modal("hide")}})}function save_detail(){var a=$("#form_file_det")[0],a=new FormData(a);$.ajax({type:"POST",enctype:"multipart/form-data",url:base_url+"master_talent/simpan_detail_talent",data:a,dataType:"JSON",processData:!1,contentType:!1,cache:!1,timeout:6e5,success:function(a){a.status?(swal.fire("Sukses!!","Berhasil Menambah File Gallery","success"),location.reload()):swalConfirm.fire("Oops","Terjadi Kesalahan","error")},error:function(a){console.log("ERROR : ",a),$("#btnSave").prop("disabled",!1),$("#btnSave").text("Simpan"),reset_modal_form(),$(".modal").modal("hide")}})}function save_video_bak(){var a=$("#form_video")[0],a=new FormData(a);$.ajax({type:"POST",enctype:"multipart/form-data",url:base_url+"master_talent/simpan_video",data:a,dataType:"JSON",processData:!1,contentType:!1,cache:!1,timeout:6e5,success:function(a){a.status?(swal.fire("Sukses!!","Berhasil Menambah File Gallery","success"),location.reload()):swalConfirm.fire("Oops","Terjadi Kesalahan","error")},error:function(a){console.log("ERROR : ",a),$("#btnSave").prop("disabled",!1),$("#btnSave").text("Simpan"),reset_modal_form(),$(".modal").modal("hide")}})}function save_video(){$(".progress").removeClass("hidden");var a=$("#form_video")[0],a=new FormData(a);$.ajax({xhr:function(){var a=new window.XMLHttpRequest;return a.upload.addEventListener("progress",function(a){$(".persen").text("0%"),a.lengthComputable&&(a=a.loaded/a.total,a=parseInt(100*a),$(".persen").text(a+"%"),$(".progress-bar").css("width",a+"%"))},!1),a},enctype:"multipart/form-data",url:base_url+"master_talent/simpan_video_talent",type:"POST",data:a,contentType:!1,dataType:"json",processData:!1,cache:!1,timeout:6e5,success:function(a){swalConfirm.fire("Sukses!","Berhasil Upload Video","success"),location.reload()}})}function delete_talent(e){swalConfirmDelete.fire({title:"Hapus Data Talent ?",text:"Data Akan dihapus permanen ?",type:"warning",showCancelButton:!0,confirmButtonText:"Ya, Hapus Data !",cancelButtonText:"Tidak, Batalkan!",reverseButtons:!0}).then(a=>{a.value?$.ajax({url:base_url+"master_talent/delete_talent",type:"POST",dataType:"JSON",data:{id:e},success:function(a){swalConfirm.fire("Berhasil Hapus Talent!",a.pesan,"success"),table.ajax.reload()},error:function(a,e,t){Swal.fire("Terjadi Kesalahan")}}):a.dismiss===Swal.DismissReason.cancel&&swalConfirm.fire("Dibatalkan","Aksi Dibatalakan","error")})}function delete_gallery(e){swalConfirmDelete.fire({title:"Hapus File Terpilih ?",text:"Data Akan dihapus permanen ?",type:"warning",showCancelButton:!0,confirmButtonText:"Ya, Hapus Data !",cancelButtonText:"Tidak, Batalkan!",reverseButtons:!0}).then(a=>{a.value?$.ajax({url:base_url+"master_talent/delete_gallery",type:"POST",dataType:"JSON",data:{id:e},success:function(a){swalConfirm.fire("Berhasil Hapus gallery!",a.pesan,"success"),location.reload()},error:function(a,e,t){Swal.fire("Terjadi Kesalahan")}}):a.dismiss===Swal.DismissReason.cancel&&swalConfirm.fire("Dibatalkan","Aksi Dibatalakan","error")})}function delete_video(e){swalConfirmDelete.fire({title:"Hapus File Terpilih ?",text:"Data Video dihapus permanen ?",type:"warning",showCancelButton:!0,confirmButtonText:"Ya, Hapus Data !",cancelButtonText:"Tidak, Batalkan!",reverseButtons:!0}).then(a=>{a.value?$.ajax({url:base_url+"master_talent/delete_video",type:"POST",dataType:"JSON",data:{id:e},success:function(a){swalConfirm.fire("Berhasil Hapus video!",a.pesan,"success"),location.reload()},error:function(a,e,t){Swal.fire("Terjadi Kesalahan")}}):a.dismiss===Swal.DismissReason.cancel&&swalConfirm.fire("Dibatalkan","Aksi Dibatalakan","error")})}function reset_modal_form(){$("#form-talent")[0].reset(),$(".append-opt").remove(),$("div.form-group").children().removeClass("is-invalid invalid-feedback"),$("span.help-block").text(""),$("#label_foto").text("Pilih gambar yang akan diupload"),$("#form-talent textarea[name='deskripsi']").val(""),$("#div_preview_foto").css("display","none"),$("#preview_img").attr("src","")}function reset_modal_form_import(){$("#form_import_excel")[0].reset(),$("#label_file_excel").text("Pilih file excel yang akan diupload")}function readURL(a){var e;a.files&&a.files[0]?((e=new FileReader).onload=function(a){$("#div_preview_foto").css("display","block"),$("#preview_img").attr("src",a.target.result)},e.readAsDataURL(a.files[0])):($("#div_preview_foto").css("display","none"),$("#preview_img").attr("src",""))}$(document).ready(function(){$("#deskripsi").ckeditor(),$("input.numberinput").bind("keypress",function(a){return 8==a.which||0==a.which||!(a.which<48||57<a.which)||46==a.which}),table=$("#tabel_talent").DataTable({responsive:!0,searchDelay:500,processing:!0,serverSide:!0,ajax:{url:base_url+"master_talent/list_talent",type:"POST"},columnDefs:[{targets:[-1],orderable:!1}]}),$("#foto").change(function(){readURL(this)}),$(document).on("click",".btn_edit_status",function(){var e=$(this).attr("id"),t=$(this).val();swalConfirm.fire({title:"Ubah Status Data User ?",text:"Apakah Anda Yakin ?",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, Ubah Status!",cancelButtonText:"Tidak, Batalkan!",reverseButtons:!0}).then(a=>{a.value?$.ajax({url:base_url+"master_user/edit_status_user/"+e,type:"POST",dataType:"JSON",data:{status:t},success:function(a){swalConfirm.fire("Berhasil Ubah Status User!",a.pesan,"success"),table.ajax.reload()},error:function(a,e,t){Swal.fire("Terjadi Kesalahan")}}):a.dismiss===Swal.DismissReason.cancel&&swalConfirm.fire("Dibatalkan","Aksi Dibatalakan","error")})}),$(".modal").on("hidden.bs.modal",function(){reset_modal_form(),reset_modal_form_import()})});