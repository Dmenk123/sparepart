var save_method,table;function formatDataSelect(e){return e.id?$('<span><img src="'+e.thumb+'"/> '+e.text+"</span>"):e.text}function delete_galeri(a){swalConfirmDelete.fire({title:"Hapus Galeri ?",text:"Data Galeri Akan Di Stop ?",type:"warning",showCancelButton:!0,confirmButtonText:"Ya, Hapus Galeri !",cancelButtonText:"Tidak, Batalkan!",reverseButtons:!0}).then(e=>{e.value?$.ajax({url:base_url+"set_galeri_konten/delete_data",type:"POST",dataType:"JSON",data:{id:a},success:function(e){swalConfirm.fire("Berhasil Hapus Diskon!",e.pesan,"success"),location.reload()},error:function(e,a,t){Swal.fire("Terjadi Kesalahan")}}):e.dismiss===Swal.DismissReason.cancel&&swalConfirm.fire("Dibatalkan","Aksi Dibatalakan","error")})}function save(){var e=$("#form_galeri")[0],e=new FormData(e);$("#btnSave").prop("disabled",!0),$("#btnSave").text("Menyimpan Data"),$.ajax({type:"POST",enctype:"multipart/form-data",url:base_url+"set_galeri_konten/add_data",data:e,dataType:"JSON",processData:!1,contentType:!1,cache:!1,timeout:6e5,success:function(e){if(e.status)swal.fire("Sukses!!","Berhasil Menambahkan Galeri","success"),location.reload();else{for(var a=0;a<e.inputerror.length;a++)"sel_galeri"!=e.inputerror[a]?($('[name="'+e.inputerror[a]+'"]').addClass("is-invalid"),$('[name="'+e.inputerror[a]+'"]').next().text(e.error_string[a]).addClass("invalid-feedback")):$('[name="'+e.inputerror[a]+'"]').next().next().text(e.error_string[a]).addClass("invalid-feedback-select");$("#btnSave").prop("disabled",!1),$("#btnSave").text("Simpan")}},error:function(e){console.log("ERROR : ",e),$("#btnSave").prop("disabled",!1),$("#btnSave").text("Simpan"),reset_modal_form(),$(".modal").modal("hide")}})}function reset_modal_form(){$("#form-talent-aktif")[0].reset(),$(".append-opt").remove(),$("div.form-group").children().removeClass("is-invalid invalid-feedback"),$("span.help-block").text(""),$(".kt-select2").val("").trigger("change")}function readURL(e){var a;e.files&&e.files[0]?((a=new FileReader).onload=function(e){$("#div_preview_foto").css("display","block"),$("#preview_img").attr("src",e.target.result)},a.readAsDataURL(e.files[0])):($("#div_preview_foto").css("display","none"),$("#preview_img").attr("src",""))}$(document).ready(function(){$("input.numberinput").bind("keypress",function(e){return 8==e.which||0==e.which||!(e.which<48||57<e.which)||46==e.which}),table=$("#tabel_aktif_talent").DataTable({responsive:!0,searchDelay:500,processing:!0,serverSide:!0,ajax:{url:base_url+"set_aktif_talent/list_data",type:"POST"},columnDefs:[{targets:[-1],orderable:!1}]}),$("#sel_galeri").select2({templateResult:formatDataSelect,templateSelection:formatDataSelect,tokenSeparators:[","," "],minimumInputLength:0,minimumResultsForSearch:5,ajax:{url:base_url+"set_galeri_konten/select_galeri_konten",dataType:"json",type:"GET",data:function(e){return{term:e.term}},processResults:function(e){return{results:$.map(e,function(e){return{text:e.text,id:e.id,path:e.path,thumb:e.thumb}})}}}}),$(".modal").on("hidden.bs.modal",function(){reset_modal_form()})});